// @ts-nocheck
import{GithubLink,LinkedInLink,WebSiteLink}from"./modules/social.mjs";import Settings from"./modules/settings.mjs";import PDF from"./modules/pdf.mjs";import HTMLCSS from"./modules/htmlcss.mjs";const formUser=document.querySelector("#social"),inputMedia=document.querySelector("#media"),labelPseudo=formUser.querySelector('label[for="pseudo"]'),inputPseudo=document.querySelector("#pseudo"),labelWebsiteLink=formUser.querySelector('label[for="websiteLink"]'),inputWebsiteLink=document.querySelector("#websiteLink"),list=document.getElementById("list");function createMediaObject(e,t,n=null){switch(e){case"linkedin":default:return new LinkedInLink(t,n);case"github":return new GithubLink(t,n);case"website":return new WebSiteLink(t,n)}}inputMedia.addEventListener("change",(()=>{const e="WebSite"===inputMedia.value;labelPseudo.textContent=e?"Nom du site":"Pseudonyme",inputPseudo.placeholder=e?"Nom":"Votre pseudo",e&&labelWebsiteLink.classList.toggle("inactive"),e&&inputWebsiteLink.classList.toggle("inactive")}));const settings=new Settings;async function buildMediaLink(e,t){const n=document.createElement("li"),i=document.createElement("p");i.textContent=t.name+" - ";const o=document.createElement("p");o.textContent=t.constructor.name+" - ",n.append(o,i,t.anchor),e.prepend(n)}(async()=>{for(const e of Object.keys(settings.links))for(const t of settings.links[e]){const n=createMediaObject(e,t.name,t.link);await buildMediaLink(list,n)}})(),formUser.addEventListener("submit",(async e=>{try{e.preventDefault();const t=inputMedia.value.toLowerCase(),n=createMediaObject(t,inputPseudo.value.trim());buildMediaLink(list,n),settings.addLink(t,n),formUser.reset()}catch(e){console.error(e)}})),(async()=>{try{await PDF.createButton(document.getElementById("list"),document.getElementById("list"))}catch(e){console.error(e),document.getElementById("error").textContent=e}try{await HTMLCSS.createButton(document.getElementById("list"),document.getElementById("cv"))}catch(e){console.error(e),document.getElementById("error").textContent=e}})();